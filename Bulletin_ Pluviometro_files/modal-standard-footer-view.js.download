/*
 * Define a Standard Modal View
 *
 * @author	Kenny Sam
 * @since	2014-12-19
 *
 */

window.wl = window.wl || {};
window.wl.davis = window.wl.davis || {};
window.wl.davis.views = window.wl.davis.views || {};

// Views
wl.davis.views.ModalStandardFooterView = Marionette.ItemView.extend({
	template: wl.shared.tpl['modal-standard-footer'],

	/**
	 * @param {array} aFooterBtns		An array of json objects to define button options
	 *									{ btnId: ##, text: ABC}
	 */
	initialize: function(aFooterBtns) {

		this.model = new Backbone.Model();
		//Loop through the button options.
		var sModalVar;
		var sBtnText;
		$.each(aFooterBtns, function() {
			sElemId = "";
			//Determine what buttons needs to be set.
			switch (this.btnId) {
				case wl.app.Modal.SAVE_BTN:
					sElemId = "js-saveBtn";
					break;
				case wl.app.Modal.CANCEL_BTN:
					sElemId = "js-cancelBtn";
					break;
				case wl.app.Modal.UPDATE_BTN:
					sElemId = "js-updateBtn";
					break;
			}

			if (sModalVar != "") {
				//BUG BUG - currently not all pages is using the oLang so we need to detect that.
				this.text = wl.app.Modal.translateString(this.text);
				//Pass the buttn text into the footer tempalte.
				this.elemId = sElemId;
			}
		});

		//Pass the button information into the view
		this.model.set("aFooterBtns", aFooterBtns);
	},
	ui: {
		closeBtn: "#js-closeBtn",
		cancelBtn: "#js-cancelBtn",
		saveBtn: "#js-saveBtn",
		updateBtn: "#js-updateBtn"
	},
	events: {
		'click @ui.closeBtn': 'onCancel',
		'click @ui.cancelBtn': 'onCancel',
		'click @ui.saveBtn': 'onSave',
		'click @ui.updateBtn': 'onUpdate'
	},

	hide: function() {
		var self = this;
		$.each(self.model.get('aFooterBtns'), function() {
			$("#" + this.elemId).hide();
		});
	},

	//These events function needs to be overwritten when footer is extended
	//So the desired actions are taken when the button event is triggered.
	onCancel: function() {},
	onSave: function() {},
	onUpdate: function() {}

});
