/**
 * Created by anton.milko on 19-Apr-21.
 */

var contentsViews = wl.app.Dashboard.oContentsViews;
var oViews = wl.app.Dashboard.oViews;

/*************************************
 * Soil Moisture = Structure 25
 *************************************/
contentsViews.structure_type_25_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  afterInit: function () {
    this.conStructure25 = wl.constants.structureType25FieldName;
    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.model.set('unit', this.unitLabelSoilMoisture);
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure25);
    this.color = "#3c464c";
    this.oChartOptions = this.getSolidGaugeChartOptions();
    this.oChartOptions.tooltip.enabled = false;
    this.size = Marionette.getOption(this, 'size');
    // end constuctor
  },
  buildGraph: function () {
    this.oChartOptions.yAxis.max =
      wl.app.Dashboard.getSoilMoisturePositiveValueMaxForGauge(this.unitLabelSoilMoisture);
    this.oChartOptions.yAxis.min =
      wl.app.Dashboard.getSoilMoisturePositiveValueMinForGauge(this.unitLabelSoilMoisture);
    this.oChartOptions.yAxis.tickPositions = [this.oChartOptions.yAxis
      .min, this.oChartOptions.yAxis.max
    ];
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChart = new Highcharts.Chart(this.oChartOptions);
    this.oChart.setSize(this.size.width - 4, this.size.height - 4);
    return this;
  },
  getSeries: function () {
    var sData = '--';
    var dRawData = 0;
    if (this.unitLabelSoilMoisture === "cb" || this.unitLabelSoilMoisture ===
      "kPa") {
      dRawData = 200;
    }
    if (this.unitLabelSoilMoisture === "bar") {
      dRawData = 2;
    }
    if (wl.app.Dashboard.hasMaiaData(this.portletSensorData[this.conStructure25.soil_moisture]) &&
      !wl.app.oMapper.checkOutdatedData(this.lsid)) {
      dRawData = this.portletSensorData[this.conStructure25.soil_moisture];
      sData = Utils.formatSensorReading('Soil Moisture ' + this.unitLabelSoilMoisture,
        dRawData, wl.data.userAccountSetting);
      if (dRawData >= this.oChartOptions.yAxis.min && this.unitLabelSoilMoisture !==
        "%") {
        this.oChartOptions.yAxis.tickPositions = [this.oChartOptions
          .yAxis.min, this.oChartOptions.yAxis.max
        ];
      }
    }
    return [{
      id: 'soilMoisture',
      data: [dRawData],
      color: "#3c464c",
      threshold: this.oChartOptions.yAxis.min,
      dataLabels: {
        style: {
          fontWeight: 'normal'
        },
        y: 32,
        format: '<div style="text-align:center;"><span style="font-family:merriweatherregular;font-size:24px;color:#3b454b">' +
        sData + '</span><br/>' +
        '<span style="font-family:merriweatherregular;font-size:14px;color:#3b454b">' +
        this.unitLabelSoilMoisture + '</span></div>'
      }
    }];
  },
  updateData: function () {
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure25);
    this.oChart.series[0].update(this.getSeries()[0]);
  }
});

/*************************************
 * Soil Moisture Sensor (Moisture,Temp) - Structure 29
 *************************************/
contentsViews.structure_type_29_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.thresholdMoist = 0;
    this.thresholdTemp = 0;
    this.translationKeys = ['moisture', 'temp'];
    this.translations = [];
    this.promises = wl.app.Dashboard.getTranslation(this.translationKeys, this.translations);
    this.model.set('unit', wl.data.unitLabelPercent);
    this.oChartOptions.tooltip.enabled = false;

    this.oChartOptions.chart.marginTop = 24;
    this.oChartOptions.chart.marginBottom = 50;

    //Get the structure and data and save it into this context.
    this.conStructure29 = wl.constants.structureType29FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure29);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.oChartOptions.plotOptions.column.grouping = false;
    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        if (this.point.id === "") {
          return undefined;
        }
        if (this.point.id.indexOf('soil_moisture') !== -1) {
          return Utils.formatSensorReading('Soil Moisture ' + that.unitLabelSoilMoisture,
            this.y, wl.data.userAccountSetting);
        } else if (this.point.id.indexOf('soil_temperature') !== -1) {
          return Utils.formatSensorReading('Soil Temperature', this
            .y, wl.data.userAccountSetting);
        }
      };
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.xAxis = this.getXAxis();
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;

    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var moistureVal = null;
    var tempVal = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      moistureVal = this.portletSensorData[this.conStructure29.soil_moisture];
      tempVal = this.portletSensorData[this.conStructure29.soil_temperature]
    }

    if (moistureVal < 0) {
      this.thresholdMoist = wl.app.Dashboard.getThresholdForNegativeVal(moistureVal);
    }

    if (tempVal < 0) {
      this.thresholdTemp = wl.app.Dashboard.getThresholdForNegativeVal(tempVal);
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0, //Map to to yAxis Label index.
      data: [
        wl.app.Dashboard.createHighChartDataPoint(this.lsid +
          '_soil_moisture', " ", moistureVal, "#2cb17b"), {
          y: 0,
          id: '',
          color: 'transparent'
        }
      ],
      threshold: this.thresholdMoist
    }, {
      id: 'temperature',
      yAxis: 1, //Map to to yAxis Label index.
      data: [{
        y: 0,
        id: '',
        color: 'transparent'
      },
        wl.app.Dashboard.createHighChartDataPoint(this.lsid +
          '_soil_temperature', " ", tempVal, "#397eaf")
      ],
      threshold: this.thresholdTemp
    }];
  },
  getXAxis: function () {
    var that = this;
    return [{
      categories: [that.translations['moisture'], that.translations[
        'temp']],
      labels: {
        autoRotation: [-25, -35],
        y: 15,
        style: {
          textOverflow: 'none'
        }
      }
    }]
  },
  getYAxis: function () {
    var that = this;
    return [{
      labels: {
        format: '{value} ' + that.unitLabelSoilMoisture
      },
      title: null,
      opposite: false,
      min: this.thresholdMoist !== 0 ? this.thresholdMoist : null,
      max: this.thresholdMoist !== 0 ? 0 : null
    }, {
      labels: {
        format: '{value} ' + wl.data.unitLabelTemperature

      },
      title: null,
      opposite: true,
      min: this.thresholdTemp !== 0 ? this.thresholdTemp : null,
      max: this.thresholdTemp !== 0 ? 0 : null
    }]
  },
  updateData: function () {
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure29);
    this.oChart.series[0].update(this.getSeries()[0]);
    this.oChart.series[1].update(this.getSeries()[1]);
  }
});

/*************************************
 * Soil Moisture Sensor (Moisture,Temp,salinity) - Structure 30
 *************************************/
contentsViews.structure_type_30_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType30FieldName;
  },
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = false;
    this.translationKeys = ['moisture', 'temp', 'ec'];
    this.translations = [];
    this.promises = wl.app.Dashboard.getTranslation(this.translationKeys, this.translations);
    this.oChartOptions.chart.marginBottom = 50;
    this.oChartOptions.chart.marginTop = 24;

    //Get the structure and data and save it into this context.
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.getStructure());

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.unitLabelSalinity = Utils.getAccountEcUnit(
      wl.app.Dashboard.getUnitLabelSalinity(this.lsid));

    this.model.set('unit', this.unitLabelSoilMoisture);

    this.oChartOptions.plotOptions.column.grouping = false;
    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        if (this.point.id === "") {
          return undefined;
        }
        switch (this.point.category) {
          case "Moisture":
            return Utils.formatSensorReading('Soil Moisture ' +
              that.unitLabelSoilMoisture, this.y, wl.data.userAccountSetting
            );
          case "Temp":
            return Utils.formatSensorReading('Soil Temperature',
              this.y, wl.data.userAccountSetting);
          case "EC":
            return Utils.formatSensorReading('Soil Salinity', this.y,
              wl.data.userAccountSetting);
        }

      };
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.xAxis = this.getXAxis();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChart = new Highcharts.Chart(this.oChartOptions);
    var w, h;

    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var moistureVal = null,
      tempVal = null,
      ecVal = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      moistureVal = this.portletSensorData[this.getStructure().soil_moisture];
      tempVal = this.portletSensorData[this.getStructure().soil_temperature];
      ecVal = this.portletSensorData[this.getStructure().soil_salinity];
    }

    var threshold = 0;
    if (tempVal < 0) {
      threshold = wl.app.Dashboard.getThresholdForNegativeVal(tempVal);
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0, //Map to to yAxis Label index.
      data: [
        wl.app.Dashboard.createHighChartDataPoint(this.lsid +
          '_soil_moisture', " ", moistureVal, "#00a89c"), {
          y: 0,
          id: '',
          color: 'transparent'
        }, {
          y: 0,
          id: '',
          color: 'transparent'
        }
      ]
    }, {
      id: 'soilTemperature',
      yAxis: 1, //Map to to yAxis Label index.
      data: [{
        y: 0,
        id: '',
        color: 'transparent'
      },
        wl.app.Dashboard.createHighChartDataPoint(this.lsid +
          '_soil_temperature', " ", tempVal, "#29b574 "), {
          y: 0,
          id: '',
          color: 'transparent'
        }
      ],
      threshold: threshold
    }, {
      id: 'soilSalinity',
      yAxis: 2, //Map to to yAxis Label index.
      data: [{
        y: ecVal,
        id: '',
        color: 'transparent'
      }, {
        y: ecVal,
        id: '',
        color: 'transparent'
      },
        wl.app.Dashboard.createHighChartDataPoint(this.lsid + '_ec', " ",
          ecVal, "#3288c2")
      ]
    }];
  },
  getXAxis: function () {
    return [{
      categories: [this.translations['moisture'], this.translations[
        'temp'], this.translations['ec']],
      labels: {
        autoRotation: [-25, -35],
        y: 15,
        x: 5,
        style: {
          textOverflow: 'none'
        }
      }
    }];
  },
  getYAxis: function () {
    var that = this;
    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      opposite: false
    }, {
      labels: {
        format: '{value}' + '<br/>' + wl.data.unitLabelTemperature,
        style: {
          letterSpacing: '-0.7px'
        }
      },
      title: null,
      opposite: true,
      offset: -15
    }, {
      labels: {
        formatter: function () {
          return Utils.formatSensorReading('Soil Salinity',
              this.value, wl.data.userAccountSetting) +
            '<br/>' + that.unitLabelSalinity
        },
        style: {
          letterSpacing: '-0.7px'
        }
      },
      title: null,
      opposite: true,
      offset: 10
    }]
  },
  updateData: function () {
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.getStructure());
    this.oChart.series[0].update(this.getSeries()[0], false);
    this.oChart.series[1].update(this.getSeries()[1], false);
    this.oChart.series[2].update(this.getSeries()[2], false);
    this.oChart.redraw();
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Moisture,Temp) (6 rings) - Structure 39
 *************************************/
contentsViews.structure_type_39_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    //Get the structure and data and save it into this context.
    this.conStructure39 = wl.constants.structureType39FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure39);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return Utils.formatSensorReading('Soil Moisture ' + that.unitLabelSoilMoisture,
          this.y, wl.data.userAccountSetting)
      };

    //get depth value for each sensor ring
    this.ringLabel1 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_1);
    this.ringLabel2 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_2);
    this.ringLabel3 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_3);
    this.ringLabel4 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_4);
    this.ringLabel5 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_5);
    this.ringLabel6 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure39.soil_moisture_6);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure39.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure39.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure39.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure39.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure39.soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.conStructure39.soil_moisture_6];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value} ' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure39.soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure39.soil_temperature_6]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp, Salinity) (6 rings) - Structure 40
 *************************************/
contentsViews.structure_type_40_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };
    this.oChartOptions.chart.marginRight = 40;

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure40 = wl.constants.structureType40FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure40);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.unitLabelSalinity = Utils.getAccountEcUnit(
      wl.app.Dashboard.getUnitLabelSalinity(this.lsid));

    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure40, this, this.promises,
      this.lsid, 6);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure40.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure40.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure40.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure40.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure40.soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.conStructure40.soil_moisture_6];
    }

    return [{
      id: 'soilMoisture',
      //					name: 'Temperature',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature,
      soil_salinity_unit: this.unitLabelSalinity
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_1]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_2]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_3]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_4]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_5]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure40.soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure40.soil_temperature_6]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure40.soil_salinity_6]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (12 rings) - Structure 41
 *************************************/
contentsViews.structure_type_41_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType41FieldName;
  },
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.getStructure());

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    //get depth value for each sensor ring
    this.ringLabel1 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_1);
    this.ringLabel2 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_2);
    this.ringLabel3 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_3);
    this.ringLabel4 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_4);
    this.ringLabel5 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_5);
    this.ringLabel6 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_6);
    this.ringLabel7 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_7);
    this.ringLabel8 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_8);
    this.ringLabel9 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_9);
    this.ringLabel10 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_10);
    this.ringLabel11 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_11);
    this.ringLabel12 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_12);
    this.ringLabel13 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_13);
    this.ringLabel14 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_14);
    this.ringLabel15 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_15);
    this.ringLabel16 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_16);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null,
      soil_moisture_10 = null,
      soil_moisture_11 = null,
      soil_moisture_12 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.getStructure().soil_moisture_9];
      soil_moisture_10 = this.portletSensorData[this.getStructure()
        .soil_moisture_10];
      soil_moisture_11 = this.portletSensorData[this.getStructure()
        .soil_moisture_11];
      soil_moisture_12 = this.portletSensorData[this.getStructure()
        .soil_moisture_12];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#397EAF",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }, {
        color: "#3F749B",
        name: this.ringLabel10,
        id: this.lsid + '_soil_moisture_' + this.ringLabel10,
        y: soil_moisture_10
      }, {
        color: "#416783",
        name: this.ringLabel11,
        id: this.lsid + '_soil_moisture_' + this.ringLabel11,
        y: soil_moisture_11
      }, {
        color: "#415D71",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel12,
        y: soil_moisture_12
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_6]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel7:
        oTplData.name = this.ringLabel7;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_7]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_7]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel8:
        oTplData.name = this.ringLabel8;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_8]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_8]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel9:
        oTplData.name = this.ringLabel9;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_9]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_9]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel10:
        oTplData.name = this.ringLabel10;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_10]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_10]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel11:
        oTplData.name = this.ringLabel11;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_11]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_11]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel12:
        oTplData.name = this.ringLabel12;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_12]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_12]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel13:
        oTplData.name = this.ringLabel13;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_13]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_13]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel14:
        oTplData.name = this.ringLabel14;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_14]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_14]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel15:
        oTplData.name = this.ringLabel15;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_15]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_15]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel16:
        oTplData.name = this.ringLabel16;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_16]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_16]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp,Salinity) (12 rings) - Structure 42
 *************************************/
contentsViews.structure_type_42_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType42FieldName;
  },
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.getStructure());

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.unitLabelSalinity = Utils.getAccountEcUnit(
      wl.app.Dashboard.getUnitLabelSalinity(this.lsid));

    //get depth value for each sensor ring
    this.ringLabel1 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_1);
    this.ringLabel2 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_2);
    this.ringLabel3 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_3);
    this.ringLabel4 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_4);
    this.ringLabel5 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_5);
    this.ringLabel6 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_6);
    this.ringLabel7 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_7);
    this.ringLabel8 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_8);
    this.ringLabel9 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure().soil_moisture_9);
    this.ringLabel10 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_10);
    this.ringLabel11 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_11);
    this.ringLabel12 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_12);
    this.ringLabel13 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_13);
    this.ringLabel14 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_14);
    this.ringLabel15 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_15);
    this.ringLabel16 = wl.app.Dashboard.getRingDepth(this.lsid, this.getStructure()
      .soil_moisture_16);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null,
      soil_moisture_10 = null,
      soil_moisture_11 = null,
      soil_moisture_12 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.getStructure().soil_moisture_9];
      soil_moisture_10 = this.portletSensorData[this.getStructure()
        .soil_moisture_10];
      soil_moisture_11 = this.portletSensorData[this.getStructure()
        .soil_moisture_11];
      soil_moisture_12 = this.portletSensorData[this.getStructure()
        .soil_moisture_12];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#397EAF",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }, {
        color: "#3F749B",
        name: this.ringLabel10,
        id: this.lsid + '_soil_moisture_' + this.ringLabel10,
        y: soil_moisture_10
      }, {
        color: "#416783",
        name: this.ringLabel11,
        id: this.lsid + '_soil_moisture_' + this.ringLabel11,
        y: soil_moisture_11
      }, {
        color: "#415D71",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel12,
        y: soil_moisture_12
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      opposite: false,
      min: min,
      max: max,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature,
      soil_salinity_unit: this.unitLabelSalinity
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_1]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_2]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_3]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_4]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_5]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_6]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_6]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel7:
        oTplData.name = this.ringLabel7;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_7]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_7]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_7]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel8:
        oTplData.name = this.ringLabel8;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_8]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_8]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_8]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel9:
        oTplData.name = this.ringLabel9;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_9]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_9]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_9]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel10:
        oTplData.name = this.ringLabel10;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_10]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_10]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_10]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel11:
        oTplData.name = this.ringLabel11;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_11]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_11]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_11]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel12:
        oTplData.name = this.ringLabel12;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_12]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_12]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_12]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel13:
        oTplData.name = this.ringLabel13;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_13]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_13]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_13]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel14:
        oTplData.name = this.ringLabel14;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_14]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_14]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_14]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel15:
        oTplData.name = this.ringLabel15;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_15]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_15]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_15]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel16:
        oTplData.name = this.ringLabel15;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.getStructure().soil_moisture_16]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.getStructure().soil_temperature_16]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.getStructure().soil_salinity_16]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (4 rings) - Structure 44
 *************************************/
contentsViews.structure_type_44_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;

    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure44 = wl.constants.structureType44FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure44);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure44, this, this.promises,
      this.lsid, 4);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure44.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure44.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure44.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure44.soil_moisture_4];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure44.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure44.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure44.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure44.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure44.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure44.soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure44.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure44.soil_temperature_4]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (6 rings) - Structure 45
 *************************************/
contentsViews.structure_type_45_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;

    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure45 = wl.constants.structureType45FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure45);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.categoryLabels = [];
    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure45, this, this.promises,
      this.lsid, 6);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure45.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure45.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure45.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure45.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure45.soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.conStructure45.soil_moisture_6];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure45.soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure45.soil_temperature_6]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (5 rings) - Structure 52
 *************************************/
contentsViews.structure_type_52_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;

    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure52 = wl.constants.structureType52FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure52);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.categoryLabels = [];
    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure52, this, this.promises,
      this.lsid, 5);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure52.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure52.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure52.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure52.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure52.soil_moisture_5];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure52.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure52.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure52.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure52.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure52.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure52.soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure52.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure52.soil_temperature_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure52.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure52.soil_temperature_5]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Moisture,Temp) (9 rings) - Structure 53
 *************************************/
contentsViews.structure_type_53_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    //Get the structure and data and save it into this context.
    this.conStructure53 = wl.constants.structureType53FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure53);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return Utils.formatSensorReading('Soil Moisture ' + that.unitLabelSoilMoisture,
          this.y, wl.data.userAccountSetting)
      };

    //get depth value for each sensor ring
    this.ringLabel1 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_1);
    this.ringLabel2 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_2);
    this.ringLabel3 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_3);
    this.ringLabel4 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_4);
    this.ringLabel5 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_5);
    this.ringLabel6 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_6);
    this.ringLabel7 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_7);
    this.ringLabel8 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_8);
    this.ringLabel9 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure53.soil_moisture_9);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure53.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure53.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure53.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure53.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure53.soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.conStructure53.soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.conStructure53.soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.conStructure53.soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.conStructure53.soil_moisture_9];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#397eaf",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#3f749b",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#416783",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value} ' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_6]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel7:
        oTplData.name = this.ringLabel7;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_7]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_7]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel8:
        oTplData.name = this.ringLabel8;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_8]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_8]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel9:
        oTplData.name = this.ringLabel9;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure53.soil_moisture_9]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure53.soil_temperature_9]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp, Salinity) (9 rings) - Structure 54
 *************************************/
contentsViews.structure_type_54_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };
    this.oChartOptions.chart.marginRight = 40;

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure54 = wl.constants.structureType54FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure54);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.unitLabelSalinity = Utils.getAccountEcUnit(
      wl.app.Dashboard.getUnitLabelSalinity(this.lsid));

    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure54, this, this.promises,
      this.lsid, 9);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure54.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure54.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure54.soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.conStructure54.soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.conStructure54.soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.conStructure54.soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.conStructure54.soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.conStructure54.soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.conStructure54.soil_moisture_9];
    }

    return [{
      id: 'soilMoisture',
      //                  name: 'Temperature',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#397eaf",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#3f749b",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#416783",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature,
      soil_salinity_unit: this.unitLabelSalinity
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_1]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_2]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_3]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_3]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel4:
        oTplData.name = this.ringLabel4;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_4]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_4]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_4]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel5:
        oTplData.name = this.ringLabel5;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_5]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_5]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_5]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel6:
        oTplData.name = this.ringLabel6;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_6]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_6]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_6]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel7:
        oTplData.name = this.ringLabel7;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_7]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_7]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_7]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel8:
        oTplData.name = this.ringLabel8;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_8]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_8]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_8]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel9:
        oTplData.name = this.ringLabel9;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure54.soil_moisture_9]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure54.soil_temperature_9]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure54.soil_salinity_9]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Moisture,Temp) (3 rings) - Structure 57
 *************************************/
contentsViews.structure_type_57_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };

    //Get the structure and data and save it into this context.
    this.conStructure57 = wl.constants.structureType57FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure57);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return Utils.formatSensorReading('Soil Moisture ' + that.unitLabelSoilMoisture,
          this.y, wl.data.userAccountSetting)
      };

    //get depth value for each sensor ring
    this.ringLabel1 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure57.soil_moisture_1);
    this.ringLabel2 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure57.soil_moisture_2);
    this.ringLabel3 = wl.app.Dashboard.getRingDepth(this.lsid, this.conStructure57.soil_moisture_3);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure57.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure57.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure57.soil_moisture_3];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value} ' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure57.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure57.soil_temperature_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure57.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure57.soil_temperature_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure57.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure57.soil_temperature_3]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp, Salinity) (3 rings) - Structure 58
 *************************************/
contentsViews.structure_type_58_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  afterInit: function () {
    var that = this;
    this.oChartOptions.tooltip.enabled = true;
    this.oChartOptions.tooltip.useHTML = true;
    this.oChartOptions.tooltip.formatter = function () {
      return that._getTooltip(this);
    };
    this.oChartOptions.chart.marginRight = 40;

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.conStructure58 = wl.constants.structureType58FieldName;
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.conStructure58);

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);
    this.unitLabelSalinity = Utils.getAccountEcUnit(
      wl.app.Dashboard.getUnitLabelSalinity(this.lsid));

    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.conStructure58, this, this.promises,
      this.lsid, 3);
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.conStructure58.soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.conStructure58.soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.conStructure58.soil_moisture_3];
    }

    return [{
      id: 'soilMoisture',
      //                  name: 'Temperature',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  },
  _getTooltip: function (oHcData) {
    var oTplData = {
      soil_moist_unit: this.unitLabelSoilMoisture,
      soil_temp_unit: wl.data.unitLabelTemperature,
      soil_salinity_unit: this.unitLabelSalinity
    };

    switch (oHcData.point.id) {
      case this.lsid + '_soil_moisture_' + this.ringLabel1:
        oTplData.name = this.ringLabel1;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure58.soil_moisture_1]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure58.soil_temperature_1]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure58.soil_salinity_1]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel2:
        oTplData.name = this.ringLabel2;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure58.soil_moisture_2]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure58.soil_temperature_2]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure58.soil_salinity_2]);
        break;
      case this.lsid + '_soil_moisture_' + this.ringLabel3:
        oTplData.name = this.ringLabel3;
        oTplData.soil_moist_value = wl.app.Dashboard.formatSoilMoisture(this.portletSensorData[
          this.conStructure58.soil_moisture_3]);
        oTplData.soil_temp_value = wl.app.Dashboard.formatSoilTemp(this.portletSensorData[
          this.conStructure58.soil_temperature_3]);
        oTplData.soil_salinity_value = wl.app.Dashboard.formatSoilSalinity(this.portletSensorData[
          this.conStructure58.soil_salinity_3]);
        break;
    }
    return window.tpl['tooltip-soil-moisture'](oTplData);
  }
});

/*************************************
 * Soil Moisture Profile (Soil Moisture) (5 rings) - Structure 67
 *************************************/
contentsViews.structure_type_67_graph = oViews.BaseGraphView.extend({
  className: 'graph-view',
  portletSensorData: [],
  getStructure: function () {
    return wl.constants.structureType67FieldName;
  },
  getRingsNumber: function () {
    return 5;
  },
  afterInit: function () {
    var that = this;

    this.oChartOptions.plotOptions.series.dataLabels.formatter =
      function () {
        return wl.app.Dashboard.formatSoilMoisture(this.y);
      };

    //Get the structure and data and save it into this context.
    this.portletSensorData = wl.app.Dashboard.getMaiaSensorData(this.lsid, this.getStructure());

    this.unitLabelSoilMoisture = Utils.getAccountSoilUnit(
      wl.app.Dashboard.getUnitLabelMoisture(this.lsid), wl.data.userAccountSetting
        .unitsSoilMoistureTypeId);

    this.categoryLabels = [];
    //get depth value for each sensor ring
    wl.app.Dashboard.getSoilMoistureLabels(this.getStructure(), this, this.promises,
      this.lsid, this.getRingsNumber());
  },
  buildGraph: function () {
    this.oChartOptions.chart.renderTo = this.$(
      '.highcharts-container')[0];
    this.oChartOptions.series = this.getSeries();
    this.oChartOptions.yAxis = this.getYAxis();
    this.oChartOptions.chart.type = "bar";
    this.oChart = new Highcharts.Chart(this.oChartOptions);

    var w, h;
    w = this.size.width - 10;
    h = this.size.height - 10;
    this.oChart.setSize(w, h, true);
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }]
    }];
  },
  getYAxis: function () {
    var that = this;
    var min = null,
      max = null;

    //if all data is 0, set extremes to push zeros to the start
    if (wl.app.Dashboard.checkSeriesDataForZeros(this.oChartOptions.series[0].data)) {
      min = 0;
      max = 10;
    }

    return [{
      labels: {
        format: '{value}' + that.unitLabelSoilMoisture
      },
      title: null,
      min: min,
      max: max,
      opposite: false,
      maxPadding: .1 //Add padding to the max value so labels can be displayed
    }]
  },
  updateData: function () {
    this.oChart.series[0].update(this.getSeries()[0]);
  }
});

/*************************************
 * Soil Moisture Profile (Soil Moisture) (6 rings) - Structure 68
 *************************************/
contentsViews.structure_type_68_graph = contentsViews.structure_type_67_graph.extend({
  getStructure: function () {
    return wl.constants.structureType68FieldName;
  },
  getRingsNumber: function () {
    return 6;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#3192b5",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#328abf",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }]
    }];
  }
});

/*************************************
 * Soil Moisture Profile (Soil Moisture) (4 rings) - Structure 69
 *************************************/
contentsViews.structure_type_69_graph = contentsViews.structure_type_67_graph.extend({
  getStructure: function () {
    return wl.constants.structureType69FieldName;
  },
  getRingsNumber: function () {
    return 4;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#2cb17b",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#2da791",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2fa09e",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2f9aaa",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }]
    }];
  }
});

/*************************************
 * Soil Moisture Sensor (Moisture, Temp, Salinity) - Structure 79
 *************************************/
contentsViews.structure_type_79_graph = contentsViews.structure_type_42_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType79FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }]
    }];
  }
});

/*************************************
 * Soil Moisture Sensor (Moisture, Temp, Salinity) - Structure 80
 *************************************/
contentsViews.structure_type_80_graph = contentsViews.structure_type_42_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType80FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }]
    }];
  }
});

/*************************************
 * Soil Moisture Sensor (Moisture, Temp, Salinity) - Structure 81
 *************************************/
contentsViews.structure_type_81_graph = contentsViews.structure_type_42_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType81FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null,
      soil_moisture_10 = null,
      soil_moisture_11 = null,
      soil_moisture_12 = null,
      soil_moisture_13 = null,
      soil_moisture_14 = null,
      soil_moisture_15 = null,
      soil_moisture_16 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.getStructure().soil_moisture_9];
      soil_moisture_10 = this.portletSensorData[this.getStructure().soil_moisture_10];
      soil_moisture_11 = this.portletSensorData[this.getStructure().soil_moisture_11];
      soil_moisture_12 = this.portletSensorData[this.getStructure().soil_moisture_12];
      soil_moisture_13 = this.portletSensorData[this.getStructure().soil_moisture_13];
      soil_moisture_14 = this.portletSensorData[this.getStructure().soil_moisture_14];
      soil_moisture_15 = this.portletSensorData[this.getStructure().soil_moisture_15];
      soil_moisture_16 = this.portletSensorData[this.getStructure().soil_moisture_16];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#397EAF",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }, {
        color: "#3F749B",
        name: this.ringLabel10,
        id: this.lsid + '_soil_moisture_' + this.ringLabel10,
        y: soil_moisture_10
      }, {
        color: "#416783",
        name: this.ringLabel11,
        id: this.lsid + '_soil_moisture_' + this.ringLabel11,
        y: soil_moisture_11
      }, {
        color: "#415D71",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel12,
        y: soil_moisture_12
      }, {
        color: "#3F525F",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel13,
        y: soil_moisture_13
      }, {
        color: "#3C474D",
        name: this.ringLabel14,
        id: this.lsid + '_soil_moisture_' + this.ringLabel14,
        y: soil_moisture_14
      }, {
        color: "#262D31",
        name: this.ringLabel15,
        id: this.lsid + '_soil_moisture_' + this.ringLabel15,
        y: soil_moisture_15
      }, {
        color: "#000000",
        name: this.ringLabel16,
        id: this.lsid + '_soil_moisture_' + this.ringLabel16,
        y: soil_moisture_16
      }]
    }];
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (4 rings) - Structure 95
 *************************************/
contentsViews.structure_type_95_graph = contentsViews.structure_type_41_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType95FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }]
    }]
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (8 rings) - Structure 82
 *************************************/
contentsViews.structure_type_82_graph = contentsViews.structure_type_41_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType82FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }]
    }];
  }
});

/*************************************
 * Multi-Sensor Soil Moisture (Soil Moisture, Temp) (16 rings) - Structure 83
 *************************************/
contentsViews.structure_type_83_graph = contentsViews.structure_type_41_graph.extend({
  className: 'graph-view',
  getStructure: function () {
    return wl.constants.structureType83FieldName;
  },
  getSeries: function () {
    var soil_moisture_1 = null,
      soil_moisture_2 = null,
      soil_moisture_3 = null,
      soil_moisture_4 = null,
      soil_moisture_5 = null,
      soil_moisture_6 = null,
      soil_moisture_7 = null,
      soil_moisture_8 = null,
      soil_moisture_9 = null,
      soil_moisture_10 = null,
      soil_moisture_11 = null,
      soil_moisture_12 = null,
      soil_moisture_13 = null,
      soil_moisture_14 = null,
      soil_moisture_15 = null,
      soil_moisture_16 = null;

    if (!wl.app.oMapper.checkOutdatedData(this.lsid)) {
      soil_moisture_1 = this.portletSensorData[this.getStructure().soil_moisture_1];
      soil_moisture_2 = this.portletSensorData[this.getStructure().soil_moisture_2];
      soil_moisture_3 = this.portletSensorData[this.getStructure().soil_moisture_3];
      soil_moisture_4 = this.portletSensorData[this.getStructure().soil_moisture_4];
      soil_moisture_5 = this.portletSensorData[this.getStructure().soil_moisture_5];
      soil_moisture_6 = this.portletSensorData[this.getStructure().soil_moisture_6];
      soil_moisture_7 = this.portletSensorData[this.getStructure().soil_moisture_7];
      soil_moisture_8 = this.portletSensorData[this.getStructure().soil_moisture_8];
      soil_moisture_9 = this.portletSensorData[this.getStructure().soil_moisture_9];
      soil_moisture_10 = this.portletSensorData[this.getStructure().soil_moisture_10];
      soil_moisture_11 = this.portletSensorData[this.getStructure().soil_moisture_11];
      soil_moisture_12 = this.portletSensorData[this.getStructure().soil_moisture_12];
      soil_moisture_13 = this.portletSensorData[this.getStructure().soil_moisture_13];
      soil_moisture_14 = this.portletSensorData[this.getStructure().soil_moisture_14];
      soil_moisture_15 = this.portletSensorData[this.getStructure().soil_moisture_15];
      soil_moisture_16 = this.portletSensorData[this.getStructure().soil_moisture_16];
    }

    return [{
      id: 'soilMoisture',
      yAxis: 0,
      data: [{
        color: "#7BE4BA",
        name: this.ringLabel1,
        id: this.lsid + '_soil_moisture_' + this.ringLabel1,
        y: soil_moisture_1
      }, {
        color: "#37D293",
        name: this.ringLabel2,
        id: this.lsid + '_soil_moisture_' + this.ringLabel2,
        y: soil_moisture_2
      }, {
        color: "#2CB17B",
        name: this.ringLabel3,
        id: this.lsid + '_soil_moisture_' + this.ringLabel3,
        y: soil_moisture_3
      }, {
        color: "#2DA791",
        name: this.ringLabel4,
        id: this.lsid + '_soil_moisture_' + this.ringLabel4,
        y: soil_moisture_4
      }, {
        color: "#2FA09E",
        name: this.ringLabel5,
        id: this.lsid + '_soil_moisture_' + this.ringLabel5,
        y: soil_moisture_5
      }, {
        color: "#2F9AAA",
        name: this.ringLabel6,
        id: this.lsid + '_soil_moisture_' + this.ringLabel6,
        y: soil_moisture_6
      }, {
        color: "#3192B5",
        name: this.ringLabel7,
        id: this.lsid + '_soil_moisture_' + this.ringLabel7,
        y: soil_moisture_7
      }, {
        color: "#328ABF",
        name: this.ringLabel8,
        id: this.lsid + '_soil_moisture_' + this.ringLabel8,
        y: soil_moisture_8
      }, {
        color: "#397EAF",
        name: this.ringLabel9,
        id: this.lsid + '_soil_moisture_' + this.ringLabel9,
        y: soil_moisture_9
      }, {
        color: "#3F749B",
        name: this.ringLabel10,
        id: this.lsid + '_soil_moisture_' + this.ringLabel10,
        y: soil_moisture_10
      }, {
        color: "#416783",
        name: this.ringLabel11,
        id: this.lsid + '_soil_moisture_' + this.ringLabel11,
        y: soil_moisture_11
      }, {
        color: "#415D71",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel12,
        y: soil_moisture_12
      }, {
        color: "#3F525F",
        name: this.ringLabel12,
        id: this.lsid + '_soil_moisture_' + this.ringLabel13,
        y: soil_moisture_13
      }, {
        color: "#3C474D",
        name: this.ringLabel14,
        id: this.lsid + '_soil_moisture_' + this.ringLabel14,
        y: soil_moisture_14
      }, {
        color: "#262D31",
        name: this.ringLabel15,
        id: this.lsid + '_soil_moisture_' + this.ringLabel15,
        y: soil_moisture_15
      }, {
        color: "#000000",
        name: this.ringLabel16,
        id: this.lsid + '_soil_moisture_' + this.ringLabel16,
        y: soil_moisture_16
      }]
    }];
  }
});