/**
 * Created by anton.milko on 3/2/17.
 * This function overrides standard behavior of drawing legend items
 * of line and column series types
 */
(function(){
    if (Highcharts != undefined) {
        Highcharts.seriesTypes.line.prototype.drawLegendSymbol = function(legend) {

            var options = this.options,
                markerOptions = options.marker,
                radius,
                legendSymbol,
                symbolWidth = legend.symbolWidth,
                renderer = this.chart.renderer,
                legendItemGroup = this.legendGroup,
                verticalCenter = legend.baseline - Math.round(legend.fontMetrics.b * 0.3),
                attr = {};

            // Draw the line
            radius = 0;  //always draw rectangle

            attr = {
                'stroke-width': 8 // custom height
            };
            if (options.dashStyle) {
                attr.dashstyle = options.dashStyle;
            }


            this.legendLine = renderer.path([
                    'M',
                    0,
                    verticalCenter,
                    'L',
                    18,  // custom width
                    verticalCenter
                ])
                .addClass('highcharts-graph')
                .attr(attr)
                .add(legendItemGroup);

            // Draw the marker
            if (markerOptions && markerOptions.enabled !== false) {
                radius = this.symbol.indexOf('url') === 0 ? 0 : markerOptions.radius;
                this.legendSymbol = legendSymbol = renderer.symbol(
                        this.symbol,
                        (symbolWidth / 2) - radius,
                        verticalCenter - radius,
                        2 * radius,
                        2 * radius,
                        markerOptions
                    )
                    .addClass('highcharts-point')
                    .add(legendItemGroup);
                legendSymbol.isMarker = true;
            }
        }

        Highcharts.seriesTypes.column.prototype.drawLegendSymbol = Highcharts.seriesTypes.line.prototype.drawLegendSymbol;
        Highcharts.seriesTypes.columnrange.prototype.drawLegendSymbol = Highcharts.seriesTypes.line.prototype.drawLegendSymbol;
    }
})();

